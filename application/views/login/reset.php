<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/bootstrap/dist/css/bootstrap.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/font-awesome/css/font-awesome.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/Ionicons/css/ionicons.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/dist/css/AdminLTE.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/dist/css/skins/_all-skins.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'css/jquery.rateyo.min.css';?>">

<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/jquery-ui/themes/base/datepicker.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/jquery-ui/themes/base/jquery-ui.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/bootstrap-daterangepicker/daterangepicker.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/datatables.net-bs/css/dataTables.bootstrap.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'css/bootstrap-datetimepicker.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'css/bootstrap-datetimepicker-standalone.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'css/select2.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/bower_components/chosen/chosen.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'public/style/style.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'css/jquery.dataTables.min.css';?>">
<link rel="stylesheet" href="<?php echo SITE_URL.'css/buttons.dataTables.min.css';?>">
<link rel="stylesheet" type="text/css" href="<?php echo SITE_URL.'css/fixedHeader.dataTables.min.css';?>">
	
	
<script type="text/javascript" src="<?php echo SITE_URL.'js/jquery-2.1.4.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/plugins/jquery-ui.custom.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/essential-plugins.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/jquery.form.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/jquery.validate.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/additional-methods.js';?>"></script> 
<script type="text/javascript" src="<?php echo SITE_URL.'js/jquery.validate.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/additional-methods.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/select2.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/moment.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/bootstrap-datetimepicker.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/jquery.rateyo.min.js';?>"></script>
	
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net/js/jquery.dataTables.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/dataTables.fixedHeader.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'js/date-eu.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net/js/dataTables.buttons.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net/js/buttons.flash.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net/js/jszip.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net/js/pdfmake.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net/js/vfs_fonts.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net/js/buttons.html5.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net/js/buttons.print.min.js';?>"></script>

<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js';?>"></script>	
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/bootstrap/dist/js/bootstrap.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/raphael/raphael.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/morris.js/morris.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/jquery-knob/dist/jquery.knob.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/moment/min/moment.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/bootstrap-daterangepicker/daterangepicker.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/jquery-slimscroll/jquery.slimscroll.min.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/fastclick/lib/fastclick.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/dist/js/adminlte.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/dist/js/pages/dashboard.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/dist/js/demo.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/bower_components/chosen/chosen.jquery.js';?>"></script>
<script type="text/javascript" src="<?php echo SITE_URL.'public/js/formTable.js';?>"></script>
	
	
	
<div class="container container-white pt10 pb10 mt95">
   <div class="row mt10">
        <div class="col-sm-12">
            <h2 class="text-center home-section-title-inner"><span>Forgot Password</span></h2>
        </div>
    </div>  
    <div class="col-sm-offset-3 col-sm-6 pb20">
		<div class="ptb20">
			<!--<form class="form-horizontal signin-form form-label-left" id="frm-reset"> -->
				<?php echo form_open(base_url(), array('id' => 'frm-reset'));?>
				<p id="status_msg"></p>	
                <div class="control-group form-group col-md-12">
                   <input type="hidden" class="form-control" name="key" id="key" placeholder="" value="<?php echo base64_encode($user_id);?>">
                </div>

                <div class="control-group form-group col-md-12">
                    <label class="col-sm-4" for="email">New Password:</label>
                    <div class="controls">
                    <input type="password" class="input-xlarge" name="first_password" id="first_password" placeholder="">
                    </div>
                </div>

                <div class="control-group form-group col-md-12">
                    <label class="col-sm-4" for="email">Confirm Password:</label>
                    <div class="controls">
                    <input type="password" class="input-xlarge" name="second_password" id="second_password" placeholder="">
                    </div>
                </div>

                <div class="form-group ptb10">   
                    <label class="control-label col-sm-3 font-16 museo-300" for="email">&nbsp;</label>             
                    <div class="col-sm-9">
						<!--<input type="submit" class="proceed button craftsmart-btn" id="signin-qikclean" value="Submit" style="width:200px;">-->
						<button type="submit" title="Login" class="btn btn-primary addsave" id="signin-qikclean">Submit</button>
                    </div>
                </div>
			<!--</form> -->
			 <?php echo form_close(); ?>	
		</div>
	</div>
</div>

 <div class="se-pre-con" style="display:none;"></div>
  
  <!-- Trigger the modal with a button -->
  <button style="display:none;" id="openconfirmationmodel" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModalconfirmation"></button>
  <!-- Modal -->
  <div class="modal fade" id="myModalconfirmation" role="dialog" style="z-index: 99999;">
    <div class="modal-dialog">
      <!-- Modal content-->
		<div class="modal-content">
			<div class="modal-header">
			  <button type="button" class="close" data-dismiss="modal">&times;</button>
			  <h4 class="modal-title" id="msgheader"></h4>
			</div>
			<div class="modal-body" id="msgdiplay">
			</div>
      </div>
    </div>
  </div>	 

<script>
var vRules = {
		first_password:{required:true},
		second_password:{required:true, equalTo:"#first_password"}
};
var vMessages = {
		first_password:{required:"Please enter new password."},
		second_password:{required:"Please enter confirm new password."}
		
};

$("#frm-reset").validate({
	rules: vRules,
	messages: vMessages,
	submitHandler: function(form) 
	{
		//alert('here');
		var re = new RegExp(/(?=.*?[#?!@$%^&*-]).{7,}$/g);
		var test = $("#first_password").val();
		if(re.test(test))
		{
			var act = "<?php echo base_url();?>login/reset_pass";
			$("#frm-reset").ajaxSubmit({
				url: act, 
				type: 'post',
				cache: false,
				clearForm: false,
				success: function (response) {
					var res = eval('('+response+')');
					if(res['success'])
					{
						$("#msgheader").html("<font style='color:green'><b>Success</b></font>");
						$("#msgdiplay").html("<font style='color:green'>"+res['msg']+"</font>");
						$("#openconfirmationmodel").trigger('click');
						setTimeout(function(){
							$(".se-pre-con").fadeOut("slow");
							window.location = "<?php echo base_url();?>";
						},2000);
					}
					else
					{
						$(".se-pre-con").fadeOut("slow");
						$("#msgheader").html("<font style='color:red'><b>Fail</b></font>");
						$("#msgdiplay").html("<font style='color:red'>"+res['msg']+"</font>");
						$("#openconfirmationmodel").trigger('click');
						return false;
					}
				}
			});
		}else
		{
			$(".se-pre-con").fadeOut("slow");
			$("#msgheader").html("<font style='color:red'><b>Fail</b></font>");
			$("#msgdiplay").html("<font style='color:red'>Password must be of Minimum 7 alphanumeric characters with at least 1 special character.</font>");
			$("#openconfirmationmodel").trigger('click');
			return false;
		}
	}
});
</script>
